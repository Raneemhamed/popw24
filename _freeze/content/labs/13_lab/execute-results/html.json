{
  "hash": "0ba3ef190d657bb5b53ec502998abaa0",
  "result": {
    "markdown": "---\ntitle: \"Lab 10\"\nsubtitle: \"Quasi experimental designs I\"\nauthor: |\n        | **Name:** Your name here\n        | **Mac ID:** Your Mac ID here\ndate: \"**Due:** Monday, April 10, 5 PM\"\noutput: \n  pdf_document:\n    highlight: espresso\n    fig_caption: yes\nurlcolor: blue\nheader-includes:\n    - \\usepackage{setspace}\n    - \\doublespacing\n    - \\usepackage{float}\n    - \\floatplacement{figure}{t}\n    - \\floatplacement{table}{t}\n    - \\usepackage{flafter}\n    - \\usepackage[T1]{fontenc}\n    - \\usepackage[utf8]{inputenc}\n    - \\usepackage{ragged2e}\n    - \\usepackage{booktabs}\n    - \\usepackage{amsmath}\nfontsize: 12pt\n---\n\n\n\n\n# Regression discontinuity\n\nThe following code declares a regression discontinuity design (RDD) with an arbitrary bandwidth. The model needs to account for potential outcomes varying along with the score `X`.\n\n\n::: {.cell hash='13_lab_cache/html/unnamed-chunk-1_081e8f7bbbbbb1167c12f5655768eba0'}\n\n```{.r .cell-code}\n# cutoff determines treatment assignment\ncutoff = 0.5\ndeg = 1\nbw = 0.05\n\n# functions to simulate potential outcomes based on\n# score values\n# See RD textbook chapter 16.5 for an explanation\ncontrol = function(X) {\n  as.vector(poly(X, 4, raw = TRUE) %*% c(.7, -.8, .5, 1))}\n\ntreatment = function(X) {\n  as.vector(poly(X, 4, raw = TRUE) %*% c(0, -1.5, .5, .8)) + .15}\n\n# M\nmodel = declare_model(\n  N = 500,\n  # unobserved variation\n  U = rnorm(N, 0, 0.1),\n  # score centered on cutoff point\n  X = runif(N, 0, 1) + U - cutoff,\n  # treatment indicator\n  D = 1 * (X > 0),\n  # potential outcomes depend on score\n  Y_D_0 = control(X) + U,\n  Y_D_1 = treatment(X) + U\n)\n```\n:::\n\n\nThe inquiry is the **Local Average Treatment Effect** (LATE) defined exactly at the cutoff. This quantity is not directly observable, but we will try to approximate it with our answer strategy.\n\n\n::: {.cell hash='13_lab_cache/html/unnamed-chunk-2_5dffe6f30b22af34fbe72c346b8f4e61'}\n\n```{.r .cell-code}\n# I\ninq = declare_inquiry(\n  LATE = treatment(0.5) - control(0.5)\n)\n```\n:::\n\n\nOur data strategy simply reveals outcomes.\n\n\n::: {.cell hash='13_lab_cache/html/unnamed-chunk-3_810a4be9d6a9919d152f09ba74ba1ac2'}\n\n```{.r .cell-code}\n# D\nreveal = declare_measurement(\n  Y = reveal_outcomes(Y ~ D)\n)\n```\n:::\n\n\n\nOur answer strategy reveals outcomes and estimates the LATE using a linear regression with an arbitrary polynomial function for X with degree `deg` and arbitrary bandwidth `bw`. We would normally use software to calibrate these, but here we will play with them manually to understand the bias-variance tradeoff.\n\n\n::: {.cell hash='13_lab_cache/html/unnamed-chunk-4_f137fb1ef1690f246d0d1b39c8e7fe30'}\n\n```{.r .cell-code}\n# A\nest = declare_estimator(\n  Y ~ D * poly(X, degree = deg),\n  subset = X > -1*bw & X < bw,\n  .method = lm_robust,\n  inquiry = \"LATE\",\n  label = \"parametric\"\n)\n```\n:::\n\n\n\n## TASKS\n\n**1. Diagnose the current design. How does it perform in terms of bias and RMSE?**\n\n**2. What happens if you use a higher order polynomial for** `degree`**? How does it affect bias and RMSE? Does that make the design better or worse? Explain**\n\n***Hint: Polynomials higher than 2 or 3 may make things too complicated.***\n\n**3. Stick to a value of** `degree` **that you like and see what happens when you increase the bandwidth** `bw` **to a number between the current value and 0.2. How does it affect performance in terms of bias and RMSE?**\n\n**4. Try now with the maximum possible bandwidth of** `bw = 0.5` **and keeping everything else the same as in the previous task. How does it affect performance in terms of bias and RMSE?**\n\n**5. Based on the previous tasks. What degree of polynomial and bandwidth would you recommend for this design? Why do you think so? (You do not need to write code for this one)**\n\n# Answers\n\nWrite your answers here. Remember to show the code you use to get the answer and to use `set.seed` with your student number to get unique results in simulations and diagnosis.",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}